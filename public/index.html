<!DOCTYPE html>
<html>
<head>
	<title>Tinderablejs demo</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<script src="tinderable.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	<link href="tinderable.css" rel="stylesheet" type="text/css">

</head>
<body>
	<h6 id="action-indicator">Swipe to see what happens</h6>
	<div id="tinderable-front"></div>
	<div id="actions">
		<button id="dislike">Dislike</button>
		<button id="superlike">Superlike</button>
		<button id="like"/>Like</button>
	</div>
	<script type="text/javascript">
	/* SOCKET IO STUFF*/
	var socket = io();
	socket.on('connect', function(data) {
		console.log('Connected to websocket');
	});

	socket.on('debug', function(data) {
		console.log(data);
	});

	console.log('Socket init done');

	var actionIndicator = document.getElementById("action-indicator");
	var tinderableFront = document.getElementById("tinderable-front");
	var tinderableData = [
		{
			img: "img1.jpg",
			title: "Koiranpentu",
			description: "Koiranpennut ovat söpöjä"
		},
		{
			img: "img2.jpg",
			title: "Norsu!!",
			description: "Norsut eivät käytä kortsuja"
		},
		{
			img: "img3.jpg",
			title: "Sauronin tulinen vagina",
			description: "Tarvitseeko tämä vielä selityksenkin"
		},

	];

	var tinderable = new Tinderable(tinderableFront);
	var stackHasItems = true;
	//Action handlesr
	function dislikeAction(dataItem) {
		actionIndicator.innerHTML = "Disliked!";
		actionIndicator.style.color = "red";
		socket.emit("dislike", dataItem);
	}
	function superlikeAction(dataItem) {
		actionIndicator.innerHTML = "Superliked!";
		actionIndicator.style.color = "blue";
		socket.emit("superlike", dataItem);
	}
	function likeAction(dataItem) {
		actionIndicator.innerHTML = "Liked!";
		actionIndicator.style.color = "green";
		socket.emit("like", dataItem);
	}
	function emptyAction(dataItem) {
		actionIndicator.innerHTML = "Stack empty!";
		actionIndicator.style.color = "black";
		stackHasItems = false;
		socket.emit("empty", dataItem);
	}

	//Button presses
	document.getElementById('dislike').addEventListener('click', function(event) {
		if (stackHasItems)
			tinderable.triggerDislike();
	});
	document.getElementById('superlike').addEventListener('click', function(event) {
		if (stackHasItems)
			tinderable.triggerSuperlike();
	});
	document.getElementById('like').addEventListener('click', function(event) {
		if (stackHasItems)
			tinderable.triggerLike();
	});

	//Swipe gestures
	tinderable.onLike(function(dataItem) {
		likeAction(dataItem);
	});
	tinderable.onSuperlike(function(dataItem) {
		superlikeAction(dataItem);
	});
	tinderable.onDislike(function(dataItem) {
		dislikeAction(dataItem);
	});

	tinderable.onStackEmpty(function(dataItem) {
		emptyAction(dataItem);
	});

	tinderable.setData(tinderableData);
	tinderable.start();

	</script>
</body>
</html>
